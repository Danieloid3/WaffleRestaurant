<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
<link rel="stylesheet" href="/css/styleMenu.css">
<head th:replace="layout :: head"></head>
<body class="inicio-body">
<!-- Barra de navegación -->
<nav th:replace="layout :: navbar"></nav>
<div class="menu-container">
    <h1 class="text-center my-4">Menú</h1>
    <div class="row justify-content-center">
        <div class="col-md-4 mb-4" th:each="producto : ${productos}">
            <div class="card product-card">
                <img th:src="@{/images/{img}(img=${producto.imagen})}" class="card-img-top" alt="Imagen del producto">
                <div class="card-body">
                    <h5 class="card-title" th:text="${producto.nombre}"></h5>
                    <p class="card-text" th:text="${producto.descripcion}"></p>
                    <p class="card-price">Precio: <span th:text="${producto.precio}"></span></p>

                    <!-- Botón para agregar al carrito -->
                    <button class="btn btn-warning btn-add">
                        <i class="bi bi-cart-plus"></i> Agregar al carrito
                    </button>

                    <!-- Botón visible solo para ADMIN -->
                    <div sec:authorize="hasRole('ADMIN')">
                        <a th:href="@{/admin/editar/{id}(id=${producto.id})}" class="btn btn-primary mt-2">
                            <i class="bi bi-pencil-square"></i> Editar
                        </a>
                        <a th:href="@{/admin/eliminar/{id}(id=${producto.id})}" class="btn btn-danger mt-2"
                           onclick="return confirm('¿Estás seguro de que deseas eliminar este producto?');">
                            <i class="bi bi-trash"></i> Eliminar
                        </a>
                    </div>

            </div>
        </div>

    </div>

</div>
    <div sec:authorize="hasRole('ADMIN')" class="d-flex justify-content-center mt-4">
        <a th:href="@{/admin/crear}" class="btn btn-success mt-2">
            <i class="bi bi-plus-circle"></i> Crear Producto
        </a>

    </div>
</div>

<footer th:replace="layout :: footer"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


